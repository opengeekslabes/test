{"ast":null,"code":"import { all, call, fork, take, takeEvery, put } from 'redux-saga/effects';\nimport firebase from 'firebase';\nimport { types } from '../actions/autorisation/Types';\nimport { typesUser } from '../actions/user/Username';\nimport rsf from '../../rsf/rsf';\nimport { history } from '../../components/App';\nimport { loginSaga } from './autorisation/Login';\nimport { loginGoogleSaga } from './autorisation/LogInGoogle';\nimport { createUserSaga, addUser } from './autorisation/SignUp';\nimport { logoutSaga } from './autorisation/Logout';\nimport { sendPasswordResetEmailSaga } from './autorisation/ResetPassword';\nimport { loginFacebookSaga } from './autorisation/LogInFB';\nimport { getUserSaga } from './user/User';\n\nfunction* loginStatusWatcher() {\n  const channel = yield call(rsf.auth.channel);\n\n  while (true) {\n    const {\n      user\n    } = yield take(channel);\n\n    if (user) {\n      console.log(user);\n      yield put({\n        type: typesUser.USERNAME.SUCCESS,\n        name: user.displayName\n      });\n      history.replace('profile');\n    } else {\n      history.replace('/');\n    }\n  }\n}\n\nexport function* loginRootSaga() {\n  yield fork(loginStatusWatcher);\n  yield all([takeEvery(types.LOGIN.ACTION, loginSaga), takeEvery(types.LOGINGOOGLE.REQUEST, loginGoogleSaga), takeEvery(types.SIGNUP.REQUEST, createUserSaga), takeEvery(types.SIGNUP.SUCCESS, addUser), takeEvery(types.LOGOUT.REQUEST, logoutSaga), takeEvery(types.RESET.REQUEST, sendPasswordResetEmailSaga), takeEvery(types.LOGINFB.REQUEST, loginFacebookSaga) //    takeEvery(typesUser.USERNAME.REQUEST, getUserSaga),\n  ]);\n}\nexport function* rootSaga() {\n  yield all([fork(loginRootSaga)]);\n}","map":{"version":3,"sources":["C:/Users/Daniil/ТЕСТОВОЕ/test_app/src/redux/sagas/index.js"],"names":["all","call","fork","take","takeEvery","put","firebase","types","typesUser","rsf","history","loginSaga","loginGoogleSaga","createUserSaga","addUser","logoutSaga","sendPasswordResetEmailSaga","loginFacebookSaga","getUserSaga","loginStatusWatcher","channel","auth","user","console","log","type","USERNAME","SUCCESS","name","displayName","replace","loginRootSaga","LOGIN","ACTION","LOGINGOOGLE","REQUEST","SIGNUP","LOGOUT","RESET","LOGINFB","rootSaga"],"mappings":"AAAA,SAASA,GAAT,EAAcC,IAAd,EAAoBC,IAApB,EAA0BC,IAA1B,EAAgCC,SAAhC,EAA2CC,GAA3C,QAAsD,oBAAtD;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,SAASC,KAAT,QAAsB,+BAAtB;AACA,SAASC,SAAT,QAA0B,0BAA1B;AACA,OAAOC,GAAP,MAAgB,eAAhB;AACA,SAASC,OAAT,QAAwB,sBAAxB;AACA,SAASC,SAAT,QAA0B,sBAA1B;AACA,SAASC,eAAT,QAAgC,4BAAhC;AACA,SAASC,cAAT,EAAyBC,OAAzB,QAAwC,uBAAxC;AACA,SAASC,UAAT,QAA2B,uBAA3B;AACA,SAASC,0BAAT,QAA2C,8BAA3C;AACA,SAASC,iBAAT,QAAkC,wBAAlC;AACA,SAASC,WAAT,QAA4B,aAA5B;;AAEA,UAAUC,kBAAV,GAA+B;AAC7B,QAAMC,OAAO,GAAG,MAAMnB,IAAI,CAACQ,GAAG,CAACY,IAAJ,CAASD,OAAV,CAA1B;;AACA,SAAO,IAAP,EAAa;AACX,UAAM;AAAEE,MAAAA;AAAF,QAAW,MAAMnB,IAAI,CAACiB,OAAD,CAA3B;;AACA,QAAIE,IAAJ,EAAU;AACRC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,YAAMjB,GAAG,CAAC;AAACoB,QAAAA,IAAI,EAAEjB,SAAS,CAACkB,QAAV,CAAmBC,OAA1B;AAAmCC,QAAAA,IAAI,EAAEN,IAAI,CAACO;AAA9C,OAAD,CAAT;AACAnB,MAAAA,OAAO,CAACoB,OAAR,CAAgB,SAAhB;AACD,KAJD,MAIO;AACLpB,MAAAA,OAAO,CAACoB,OAAR,CAAgB,GAAhB;AACD;AACF;AACF;;AAED,OAAO,UAAUC,aAAV,GAA0B;AAC/B,QAAM7B,IAAI,CAACiB,kBAAD,CAAV;AACA,QAAMnB,GAAG,CAAC,CACRI,SAAS,CAACG,KAAK,CAACyB,KAAN,CAAYC,MAAb,EAAqBtB,SAArB,CADD,EAERP,SAAS,CAACG,KAAK,CAAC2B,WAAN,CAAkBC,OAAnB,EAA4BvB,eAA5B,CAFD,EAGRR,SAAS,CAACG,KAAK,CAAC6B,MAAN,CAAaD,OAAd,EAAuBtB,cAAvB,CAHD,EAIRT,SAAS,CAACG,KAAK,CAAC6B,MAAN,CAAaT,OAAd,EAAuBb,OAAvB,CAJD,EAKRV,SAAS,CAACG,KAAK,CAAC8B,MAAN,CAAaF,OAAd,EAAuBpB,UAAvB,CALD,EAMRX,SAAS,CAACG,KAAK,CAAC+B,KAAN,CAAYH,OAAb,EAAsBnB,0BAAtB,CAND,EAORZ,SAAS,CAACG,KAAK,CAACgC,OAAN,CAAcJ,OAAf,EAAwBlB,iBAAxB,CAPD,CAQZ;AARY,GAAD,CAAT;AAUD;AAED,OAAO,UAAUuB,QAAV,GAAqB;AAC1B,QAAMxC,GAAG,CAAC,CAACE,IAAI,CAAC6B,aAAD,CAAL,CAAD,CAAT;AACD","sourcesContent":["import { all, call, fork, take, takeEvery, put } from 'redux-saga/effects'\nimport firebase from 'firebase'\nimport { types } from '../actions/autorisation/Types'\nimport { typesUser } from '../actions/user/Username'\nimport rsf from '../../rsf/rsf'\nimport { history } from '../../components/App'\nimport { loginSaga } from './autorisation/Login'\nimport { loginGoogleSaga } from './autorisation/LogInGoogle'\nimport { createUserSaga, addUser } from './autorisation/SignUp'\nimport { logoutSaga } from './autorisation/Logout'\nimport { sendPasswordResetEmailSaga } from './autorisation/ResetPassword'\nimport { loginFacebookSaga } from './autorisation/LogInFB'\nimport { getUserSaga } from './user/User'\n\nfunction* loginStatusWatcher() {\n  const channel = yield call(rsf.auth.channel)\n  while (true) {\n    const { user } = yield take(channel)\n    if (user) {\n      console.log(user)\n      yield put({type: typesUser.USERNAME.SUCCESS, name: user.displayName });\n      history.replace('profile')\n    } else {\n      history.replace('/')\n    }\n  }\n}\n\nexport function* loginRootSaga() {\n  yield fork(loginStatusWatcher)\n  yield all([\n    takeEvery(types.LOGIN.ACTION, loginSaga),\n    takeEvery(types.LOGINGOOGLE.REQUEST, loginGoogleSaga),\n    takeEvery(types.SIGNUP.REQUEST, createUserSaga),\n    takeEvery(types.SIGNUP.SUCCESS, addUser),\n    takeEvery(types.LOGOUT.REQUEST, logoutSaga),\n    takeEvery(types.RESET.REQUEST, sendPasswordResetEmailSaga),\n    takeEvery(types.LOGINFB.REQUEST, loginFacebookSaga),\n//    takeEvery(typesUser.USERNAME.REQUEST, getUserSaga),\n  ])\n}\n\nexport function* rootSaga() {\n  yield all([fork(loginRootSaga)])\n}"]},"metadata":{},"sourceType":"module"}